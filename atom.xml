<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://kaiii0328.github.io</id>
    <title>KAI </title>
    <updated>2020-03-18T12:48:50.978Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://kaiii0328.github.io"/>
    <link rel="self" href="https://kaiii0328.github.io/atom.xml"/>
    <subtitle>你好啊</subtitle>
    <logo>https://kaiii0328.github.io/images/avatar.png</logo>
    <icon>https://kaiii0328.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, KAI </rights>
    <entry>
        <title type="html"><![CDATA[树莓派 3B 安装 owncloud 私人云盘问题汇总]]></title>
        <id>https://kaiii0328.github.io/post/shu-mei-pai-3b-an-zhuang-owncloud-si-ren-yun-pan-wen-ti-hui-zong/</id>
        <link href="https://kaiii0328.github.io/post/shu-mei-pai-3b-an-zhuang-owncloud-si-ren-yun-pan-wen-ti-hui-zong/">
        </link>
        <updated>2020-03-18T09:47:48.000Z</updated>
        <content type="html"><![CDATA[<p>疫情在家闲着无聊想做一些小项目，刚好手上有一块树莓派 3B 的板子，上网搜了搜一些小项目就开始做了，今天这篇介绍如何在树莓派3上搭建一个个人私有云盘，可以存储自己的一些文件，主要参考了这篇博客 https://www.lxx1.com/2515/comment-page-1#comment-59883 如果还没有安装搭建过 LNMP 系统的可以参考这篇博客 http://www.lxx1.com/3696</p>
<p>基本上安装的步骤不太难，参考这两篇就可以了，但我作为一个新手遇到了很多奇奇怪怪的问题，我写这篇文章其实更想要做的是把自己的错误整理一下，希望后面做这个小项目的人可以少走点弯路，本人在网上查遇到的奇奇怪怪的问题的解决方法浪费了不少时间，对这些流逝的时间深感痛心。</p>
<ol>
<li>
<p><code>PHP intl 模块未安装</code></p>
<p>出现这个问题的同学是因为没有安装 php intl 拓展导致的（如果采用我推荐的第二篇博客链接安装 LNMP 会遇到这个问题），解决方法很简单就是安装这个模块</p>
<pre><code>sudo apt-get install php-intl
</code></pre>
</li>
<li>
<p>创建 owncloud 账号的时候网页提示 <code>Can’t create or write into the apps-external directory /var/www/html/owncloud/apps-external</code></p>
<p>出现这个问题主要是权限问题，解决方法也很简单</p>
<pre><code>$sudo mkdir /var/www/html/owncloud/apps-external #(先手动创建这个文件夹)
$sudo chmod 755 /var/www/html/owncloud/apps-external #(把这个文件夹的权限改为 755)
$ sudo chown -hR www-data owncloud #(继续更改权限)
$ sudo chgrp -hR www-data owncloud
</code></pre>
</li>
<li>
<p>点击安装完成的时候出现 <code>SQLSTATE[HY000] [1045] Access denied for user ‘kaiii’@’localhost’ (using password: YES)</code></p>
</li>
<li>
<p>或者点击安装完成的时候 mysql 可能还会出现问题，重启一下就行</p>
</li>
<li>
<p>或者点击安装完成的时候网页加载很久之后出现 <code>504 Gateway Timeout</code></p>
<p>我们是使用 Nginx+FastCGI（php-fpm）进行网页加载解析的，504 错误意味着响应时间过长，我们只需要修改一下 Nginx 和 php 的一些文件就行 先打开 /etc/php/7.3/fpm/php.ini 修改</p>
<pre><code>max_execution_time= 300
</code></pre>
<p>然后打开 /etc/php/7.3/fpm/pool.d/www.conf 文件 修改</p>
<pre><code>request_terminate_timeout=300
</code></pre>
<p>接着打开 /etc/nginx/sites-available/default文件  加入 <code>fastcgi_read_timeout=300</code></p>
<pre><code>location ~ \.php$ {
                include snippets/fastcgi-php.conf;
        #
        #       # With php-fpm (or other unix sockets):
                fastcgi_pass unix:/run/php/php7.3-fpm.sock;
        #       # With php-cgi (or other tcp sockets):          
        #       fastcgi_pass 127.0.0.1:9000;
                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                include fastcgi_params;
                fastcgi_read_timeout 300;
}
</code></pre>
<p>最后重启 Nginx</p>
<pre><code>sudo nginx -s reload
</code></pre>
</li>
<li>
<p>Nginx 重启时报错  <code>[error] open() “/run/nginx/nginx.pid” failed</code></p>
<p>可能原因是每次启动，系统都会自动删除文件，所以解决方法是修改存储位置或者重新开机。该文件里面只存储了nginx主进程的序列号，把数字记住新建一个就行，然后去 nginx.conf 修改 pid 的路径</p>
</li>
<li>
<p>启动 nginx 时 <code>nginx: [alert] could not open error log file: open() &quot;/var/log/nginx/error.log&quot; failed (13: Permission denied)</code><br>
<code>2020/03/18 20:35:10 [warn] 8089#8089: the &quot;user&quot; directive makes sense only if the master process runs with super-user privileges, ignored in /etc/nginx/nginx.conf:1</code><br>
<code>2020/03/18 20:35:10 [emerg] 8089#8089: open() &quot;/var/log/nginx/access.log&quot; failed (13: Permission denied)</code></p>
<p>一种分析是端口号被占用了，杀死占用端口的进程即可，先使用语句查看端口状态</p>
<pre><code>netstat -nltp| grep 80
</code></pre>
<p>然后可以看 80 端口有没有被占用或者直接看有没有进行中的 nginx 进程</p>
<pre><code>ps -ef |grep 80   或者  ps -ef |grep nginx
</code></pre>
<p>找到占用端口的进程杀死就行</p>
<pre><code>sudo kill -9 序列号
</code></pre>
<p>之后重启 nginx</p>
<p>另一种分析是因为 80 端口先于 ipv4 绑定，之后又和 ipv6 绑定，我们需要打开 /etc/nginx/sites-available/default文件，将 default 改成 ipv6 即可。一般来说第二种方法更治本一点</p>
<pre><code>listen [::]:80 ipv6only=on  default_server;
</code></pre>
</li>
</ol>
<p>以上就是本人遇到过的所有问题汇总，希望对你有帮助😉</p>
<p>​</p>
<p>​</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://kaiii0328.github.io/post/hello-gridea/</id>
        <link href="https://kaiii0328.github.io/post/hello-gridea/">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>👏  欢迎使用 <strong>Gridea</strong> ！<br>
✍️  <strong>Gridea</strong> 一个静态博客写作客户端。你可以用它来记录你的生活、心情、知识、笔记、创意... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>👏  欢迎使用 <strong>Gridea</strong> ！<br>
✍️  <strong>Gridea</strong> 一个静态博客写作客户端。你可以用它来记录你的生活、心情、知识、笔记、创意... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="https://gridea.dev/">Gridea 主页</a><br>
<a href="http://fehey.com/">示例网站</a></p>
<h2 id="特性">特性👇</h2>
<p>📝  你可以使用最酷的 <strong>Markdown</strong> 语法，进行快速创作</p>
<p>🌉  你可以给文章配上精美的封面图和在文章任意位置插入图片</p>
<p>🏷️  你可以对文章进行标签分组</p>
<p>📋  你可以自定义菜单，甚至可以创建外部链接菜单</p>
<p>💻  你可以在 <strong>Windows</strong>，<strong>MacOS</strong> 或 <strong>Linux</strong> 设备上使用此客户端</p>
<p>🌎  你可以使用 <strong>𝖦𝗂𝗍𝗁𝗎𝖻 𝖯𝖺𝗀𝖾𝗌</strong> 或 <strong>Coding Pages</strong> 向世界展示，未来将支持更多平台</p>
<p>💬  你可以进行简单的配置，接入 <a href="https://github.com/gitalk/gitalk">Gitalk</a> 或 <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> 评论系统</p>
<p>🇬🇧  你可以使用<strong>中文简体</strong>或<strong>英语</strong></p>
<p>🌁  你可以任意使用应用内默认主题或任意第三方主题，强大的主题自定义能力</p>
<p>🖥  你可以自定义源文件夹，利用 OneDrive、百度网盘、iCloud、Dropbox 等进行多设备同步</p>
<p>🌱 当然 <strong>Gridea</strong> 还很年轻，有很多不足，但请相信，它会不停向前 🏃</p>
<p>未来，它一定会成为你离不开的伙伴</p>
<p>尽情发挥你的才华吧！</p>
<p>😘 Enjoy~</p>
]]></content>
    </entry>
</feed>